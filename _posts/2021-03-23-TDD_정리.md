---
layout: post
title: TDD 정리
categories: [TIL - 기타]
comments: true
---

# Test Driven Development (TDD)
TDD(Test-Driven-Development) 는 애자일을 실천하기 위한 소프트웨어 개발방법론 중 하나이다.
Test First Development(TFD) 와 Refactoring이 결합된 형태라고도 한다.

## TDD 과정
보통은 개발할 때 설계 -> 코드 개발 -> 테스트 와 같은 과정을 거치게 된다.
하지만 TDD는 기존 방법과는 다르게, 테스트케이스를 먼저 작성한 이후에 실제 코드를 개발하는 리팩토링 절차를 밟게된다.

<img src="/img/tdd/normal.png" alt="normal" width="300"><br>
<img src="/img/tdd/tdd.png" alt="tdd" width="300">

위 단계를 조금 더 구체적으로 설명하자면 아래와 같다.
1. 테스트 코드를 먼저 작성함으로써 테스트 코드가 개발을 주도하도록 한다.
   - 테스트 코드가 개발을 주도하기 위해서는 반드시 **실패를 포함하는 테스트 코드의 작성**이 앞서야 한다.
2. 앞서 작성된 테스트 코드를 통과할 수 있는 '최소한의 구현 코드'를 작성한다.
   - 최소한의 구현 코드는 개선될 수 있는 많은 여지를 퐇마하는 코드이다. 단지 테스트만 패스하면 되도록 작성한다.
3. 최소한의 구현 코드를 리팩토링 단계에서 개선한다.
4. 테스트 코드 작성, 최소한의 구현 코드 작성, 구현 코드에 대한 리팩토링 순으로 짧은 주기를 반복하며 점증적으로 개발한다.

## 장점
1. 당연하게도 결함이 줄어든다. 목표로 하는 테스트케이스를 먼저 작성하고 테스트를 통과하게 코드를 작성하기 때문에 결함을 줄일 수 있다.
2. 개발을 할 때 **작은 단계**별로 나누어 코드를 작성할 수 있도록 한다. 새로운 기능을 위한 코드를 작성한다고 가정했을 때, TDD로 개발을 수행했다면 기존 코드는 이미 Test로 검증이 되어있기 때문에 추가된 코드로 범위를 한정지어 결함을 찾기 더 쉬워진다.
3. TDD는 코드 수정에 대해 불안감을 떨치고 확신을 얻을 수 있게 해주는 강점을 갖게해준다고 할 수 있다.
4. 또한, 테스트 코드를 먼저 작성하는 것은 목표를 미리 구상하는 작업이라고 할 수 있다. 클래스를 만들고 어떻게 동작할지를 먼저 정의하는 구현보다는 객체가 어떤 행동을 해야하는지에 대한 인터페이스에 집중하게 하여 **객체가 어떤 방식으로 기능을 수행하는지 보다는 객체가 무슨 역할을 가져야 하는지** 그리고 이러한 역할을 위해 무엇을 노출해야하는지 등에 집중할 수 있다.
5. 4번 과정에 집중하면 코드의 복잡도가 낮아지게 된다. 코드의 복잡도가 낮아지는 것은 결국 읽기 쉬운 **클린 코드**를 짤 수 있게 된다는 뜻이며, 이는 곧 **유지보수 비용의 감소**로 이어질 수 있다.

> 단위 테스트을 작성하는 행위는 검증보다는 설계와 문서화 행위라고 할 수 있다. 단위 테스트를 작성함으로써 기능 검증과 관련된 많은 피드백 루프를 최소화할 수 있다. - Bob martin


## 단점?
1. 기존 개발 프로세스에 비해 테스트케이스 설계가 추가되므로 생산비용이 증가된다.
   - 이것은 한정적으로 맞는 얘기인데, 단기적인 프로젝트를 완성하고 더 이상 그 프로젝트를 볼 일이 없거나 성과를 우선으로 내야한다면 테스트코드를 설계하고 작성하는 시간이 추가되기 때문에 손해일 수 있다.
   - 하지만, 장기적인 product를 개발한다는 관점에서 보면 이는 틀린 말일 수 있다. 테스트 코드를 작성하는데에 초기 비용이 늘어나는 것은 분명한 사실이지만, 장기적으로 보았을 때 더 높은 품질의 코드와 결함을 고치는 시간이 감소됨이 따라 오히려 생산성이 증가한다. (옛날에 작성해둔 버그를 찾는 시간과 이를 고치는 시간이 대부분 감소한다고 볼 수 있다.)
2. 어렵다
   - 이제껏 개발하던 방식을 바꿔야하기 때문에 당연히 어려울 수 있다.

## 결론
TDD 역시 탄탄하고 유연한 설계가 뒷받침 되어야 훌륭한 테스트케이스 설계와 테스트 코드가 나올 수 있다고 생각한다. 모든 개발 조직이 TDD를 사용해야 한다는 것은 아니지만, 더 효율적인 방법을 위해서 배우는 시간을 투자하는 것이 아깝고 그 시간에 하나라도 더 찍어내는게 맞다고 생각이 든다면 이미 도태되는 과정이라고 생각된다.

# 참고
- [tech-interview-for-developer 레포지토리](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Software%20Engineering/TDD(Test%20Driven%20Development).md)
- [TDD 이야기](http://cloudrain21.com/test-driven-development)
- [AgileData - Introduction to Test Driven Development](http://agiledata.org/essays/tdd.html)